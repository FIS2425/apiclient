openapi: 3.0.0
info:
  title: API Gateway Documentation
  description: Automatically merged API documentation
  version: 1.0.0
servers:
- url: /
paths:
  /api/v1/users:
    post:
      tags:
      - Users
      summary: Create User
      description: Creates a new user with specified roles, email, and associated IDs for doctor or patient.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  example: new_user@example.com
                  description: Email address of the user.
                  type: string
                password:
                  example: securepassword123
                  description: User's password.
                  type: string
                roles:
                  example:
                  - admin
                  - doctor
                  description: List of roles assigned to the user.
                  type: array
                  items:
                    type: string
                doctorid:
                  nullable: true
                  example: doctor123
                  description: Unique ID if the user is a doctor.
                  type: string
                patientid:
                  nullable: true
                  example: patient456
                  description: Unique ID if the user is a patient.
                  type: string
              required:
              - email
              - password
        required: true
      responses:
        '201':
          description: User created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  email:
                    example: new_user@example.com
                    type: string
                  roles:
                    example:
                    - admin
                    - doctor
                    type: array
                    items:
                      type: string
                  doctorid:
                    nullable: true
                    example: doctor123
                    type: string
                  patientid:
                    nullable: true
                    example: patient456
                    type: string
        '400':
          description: Bad request - missing fields or user already exists
          content:
            application/json:
              schema:
                example:
                  email: Email is required
                  password: Password is required
                type: object
                additionalProperties:
                  type: string
        '401':
          description: Unauthorized - token missing or invalid
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: No token provided
                    type: string
        '403':
          description: Forbidden - insufficient permissions
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Forbidden
                    type: string
        '500':
          $ref: '#/components/responses/ServerError'
      security:
      - cookieAuth: []
  /api/v1/users/{id}:
    get:
      tags:
      - Users
      summary: Retrieve user information
      description: Retrieve user details by user ID. Requires the user to be the owner or have specific roles.
      parameters:
      - in: path
        name: id
        description: ID of the user to retrieve
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: User retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  email:
                    type: string
                  username:
                    type: string
                  roles:
                    type: array
                    items:
                      type: string
                  createdAt:
                    type: string
                    format: date-time
                  updatedAt:
                    type: string
                    format: date-time
              example:
                _id: 617f1f77bcf86cd799439011
                createdAt: 2023-01-01T12:00:00Z
                email: user@example.com
                roles:
                - user
                updatedAt: 2023-01-10T12:00:00Z
                username: johndoe
        '401':
          description: Unautenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Token not valid
        '403':
          description: Unauthorized access
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Forbidden
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: User not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Internal server error
    put:
      tags:
      - Users
      summary: Update user information
      description: Update user details by user ID. Requires the user to be the owner or have specific roles.
      parameters:
      - in: path
        name: id
        description: ID of the user to update
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  example: user@example.com
                  description: Email address of the user.
                  type: string
                password:
                  example: securepassword123
                  description: User's password.
                  type: string
                roles:
                  example:
                  - admin
                  - doctor
                  description: List of roles assigned to the user.
                  type: array
                  items:
                    type: string
        required: true
      responses:
        '200':
          description: User updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  email:
                    type: string
                  roles:
                    type: array
                    items:
                      type: string
                  createdAt:
                    type: string
                    format: date-time
                  updatedAt:
                    type: string
                    format: date-time
              example:
                _id: 617f1f77bcf86cd799439011
                createdAt: 2023-01-01T12:00:00Z
                email: user@example.com
                roles:
                - doctor
                updatedAt: 2023-01-10T12:00:00Z
        '400':
          description: Bad request - missing fields or user already exists
          content:
            application/json:
              schema:
                example:
                  email: Email is required
                  password: Password is required
                type: object
                additionalProperties:
                  type: string
        '401':
          description: Unautenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Token not valid
        '403':
          description: Unauthorized access
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Forbidden
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: User not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Internal server error
    delete:
      tags:
      - Users
      summary: Deletes user
      description: Delete user by user ID. Requires the user to have specific roles.
      parameters:
      - in: path
        name: id
        description: ID of the user to update
        required: true
        schema:
          type: string
        style: simple
      responses:
        '204':
          description: User deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
              example:
                _id: 617f1f77bcf86cd799439011
        '401':
          description: Unautenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Token not valid
        '403':
          description: Unauthorized access
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Unauthorized
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: User not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Internal server error
  /api/v1/users/change-password:
    post:
      tags:
      - Users
      summary: Change user password
      description: Allows authenticated users to change their password.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                currentPassword:
                  example: oldPassword123
                  description: The current password of the user.
                  type: string
                newPassword:
                  example: newPassword456
                  description: The new password to set.
                  type: string
              required:
              - currentPassword
              - newPassword
        required: true
      responses:
        '200':
          description: Password changed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Password changed successfully
                    type: string
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: ''
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Unauthorized
                    type: string
        '403':
          description: Unauthorized access
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Forbidden
        '404':
          description: User not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: User not found
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Error when authenticating
                    type: string
  /api/v1/users/enable-2fa:
    post:
      tags:
      - Users
      summary: Enable two-factor authentication
      description: Allows authenticated users to enable two-factor authentication.
      responses:
        '200':
          description: 2FA successfully enabled
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: 2FA enabled successfully
                    type: string
                  qrCodeUrl:
                    example: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA...
                    type: string
                    format: uri
                  secret:
                    example: JBSWY3DPEHPK3PXP
                    type: string
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Bad request
                    type: string
        '401':
          description: Unauthorized
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Unauthorized
                    type: string
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Internal server error
                    type: string
  /api/v1/users/verify-2fa:
    post:
      tags:
      - Users
      summary: Verify two-factor authentication
      description: Allows authenticated users to verify two-factor authentication.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                userId:
                  example: 550e8400-e29b-41d4-a716-446655440000
                  description: The user's unique ID.
                  type: string
                totpToken:
                  example: '123456'
                  description: The two-factor authentication token.
                  type: string
              required:
              - userId
              - totpToken
        required: true
      responses:
        '200':
          description: 2FA token verified successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Login successful
                    type: string
        '400':
          description: Invalid request
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: 2FA not enabled for this user
                    type: string
        '403':
          description: Unauthorized access
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
              example:
                message: Invalid 2FA token
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Internal server error
                    type: string
  /api/v1/login:
    post:
      tags:
      - Authentication
      summary: User Login
      description: Authenticates a user with their email and password.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  example: admin@email.com
                  description: The user's unique email.
                  type: string
                password:
                  example: admin123
                  description: The user's password.
                  type: string
              required:
              - email
              - password
        required: true
      responses:
        '200':
          description: Successful login
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Login successful
                    type: string
        '401':
          description: Unauthorized - invalid credentials
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Invalid credentials
                    type: string
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/logout:
    post:
      tags:
      - Authentication
      summary: User Logout
      description: Logs out a user by clearing authentication tokens.
      responses:
        '200':
          description: Successful logout
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Logout successful
                    type: string
        '401':
          description: Unauthorized - user is not logged in
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Not logged in
                    type: string
        '500':
          $ref: '#/components/responses/ServerError'
  /api/v1/token/refresh:
    get:
      tags:
      - Authentication
      summary: Refreshes the user's token.
      description: Refreshes the user's auth and refresh tokens and sets new values in cookies.
      operationId: validateAuthToken
      responses:
        '200':
          description: Tokens refreshed.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Tokens refreshed
                    type: string
        '401':
          description: Unauthorized - Token is missing, expired, or invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Token expired or invalid.
                    type: string
  /api/v1/token/validate:
    get:
      tags:
      - Authentication
      summary: Validates the user's token.
      description: Checks the validity of the token provided in the user's cookies.
      operationId: validateAuthToken
      responses:
        '200':
          description: Token is valid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Token is valid
                    type: string
        '401':
          description: Unauthorized - Token is missing, expired, or invalid.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Token expired or invalid.
                    type: string
  /api/v1/plans:
    get:
      tags:
      - Plan
      summary: Retrieve all plans
      responses:
        '200':
          description: A list of plans
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Plan'
              examples:
                example1:
                  value:
                  - features:
                    - Feature A
                    - Feature B
                    id: '1'
                    name: Basic Plan
                    price: 10.0
  /api/v1/payments:
    get:
      tags:
      - Payment
      summary: Retrieve all payments
      responses:
        '200':
          description: A list of payments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Payment'
      security:
      - cookieAuth: []
    post:
      tags:
      - Payment
      summary: Process a new payment
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
        required: true
      responses:
        '201':
          description: Payment successfully processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
      security:
      - cookieAuth: []
  /api/v1/payments/{id}:
    get:
      tags:
      - Payment
      summary: Retrieve a payment by ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Details of a specific payment
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
        '404':
          description: Payment not found
      security:
      - cookieAuth: []
  /api/v1/clinics:
    get:
      tags:
      - Clinic
      summary: Retrieve all clinics
      responses:
        '200':
          description: A list of clinics
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Clinic'
    post:
      tags:
      - Clinic
      summary: Register a new clinic
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClinicRequest'
        required: true
      responses:
        '201':
          description: Clinic successfully registered
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Clinic'
      security:
      - cookieAuth: []
  /api/v1/clinics/{id}:
    get:
      tags:
      - Clinic
      summary: Retrieve a clinic by ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Details of a specific clinic
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Clinic'
        '404':
          description: Clinic not found
    put:
      tags:
      - Clinic
      summary: Update a clinic by ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClinicRequest'
        required: true
      responses:
        '200':
          description: Clinic successfully updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Clinic'
      security:
      - cookieAuth: []
    delete:
      tags:
      - Clinic
      summary: Delete a clinic by ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '204':
          description: Clinic successfully deleted
      security:
      - cookieAuth: []
  /api/v1/histories:
    get:
      summary: Get all clinical histories
      responses:
        '200':
          description: Returns a list of all clinical histories
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ClinicalHistory'
        '500':
          description: Error retrieving clinical histories
      security:
      - jwt: []
    post:
      summary: Create a new clinical history
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateClinicalHistory'
        required: true
      responses:
        '201':
          description: Clinical history created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Patient ID is required or validation error
        '500':
          description: Error creating clinical history
      security:
      - jwt: []
  /api/v1/histories/{id}:
    get:
      summary: Get a clinical history by its ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Returns the requested clinical history
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Clinical history ID is required
        '403':
          description: Access denied
        '404':
          description: Clinical history not found
        '500':
          description: Error retrieving clinical history
      security:
      - jwt: []
    delete:
      summary: Delete a clinical history by its ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '204':
          description: Clinical history deleted successfully
        '400':
          description: Clinical history ID is required
        '500':
          description: Error deleting clinical history
      security:
      - jwt: []
  /api/v1/histories/{id}/report:
    get:
      summary: Get a clinical history report by its ID
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Returns the requested clinical history report
          content:
            application/pdf:
              schema:
                type: string
                format: binary
        '400':
          description: Clinical history ID is required
        '403':
          description: Access denied
        '404':
          description: Clinical history not found
        '500':
          description: Error generating clinical history report
      security:
      - jwt: []
  /api/v1/histories/patient/{patientId}:
    get:
      summary: Get a clinical history by patient ID
      parameters:
      - in: path
        name: patientId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Returns the clinical history for the requested patient
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Patient ID is required
        '403':
          description: Access denied
        '404':
          description: Clinical history not found
        '500':
          description: Error retrieving clinical history for patient
      security:
      - jwt: []
    delete:
      summary: Delete a clinical history by patient ID
      parameters:
      - in: path
        name: patientId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '204':
          description: Clinical history for the patient deleted successfully
        '400':
          description: Patient ID is required
        '500':
          description: Error deleting clinical history for patient
      security:
      - jwt: []
  /api/v1/histories/{id}/allergy:
    post:
      summary: Add an allergy to a clinical history
      description: Adds an allergy to the allergies set in a specific clinical history.
      parameters:
      - in: path
        name: id
        description: The ID of the clinical history.
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                allergy:
                  description: The name of the allergy to add.
                  type: string
              required:
              - allergy
        required: true
      responses:
        '200':
          description: Allergy successfully added to the clinical history.
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  allergies:
                    type: array
                    items:
                      type: string
        '400':
          description: Missing clinical history ID or allergy in the request.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '404':
          description: Clinical history not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '500':
          description: Internal server error while adding the allergy.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
      security:
      - jwt: []
  /api/v1/histories/{id}/allergy/{allergy}:
    delete:
      summary: Remove an allergy from a clinical history
      description: Removes an allergy from the allergies set in a specific clinical history.
      parameters:
      - in: path
        name: id
        description: The ID of the clinical history.
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: allergy
        description: The name of the allergy to remove.
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Allergy successfully removed from the clinical history.
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  allergies:
                    type: array
                    items:
                      type: string
        '400':
          description: Missing clinical history ID or allergy in the request.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '404':
          description: Clinical history not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
        '500':
          description: Internal server error while removing the allergy.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
      security:
      - jwt: []
  /api/v1/histories/{id}/treatment:
    post:
      summary: Add a new treatment to a clinical history
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Treatment'
        required: true
      responses:
        '200':
          description: Treatment added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Clinical history ID is required or validation error
        '404':
          description: Clinical history not found
        '500':
          description: Error adding treatment
      security:
      - jwt: []
  /api/v1/histories/{id}/treatment/{treatmentId}:
    put:
      summary: Update a treatment in a clinical history
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: treatmentId
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Treatment'
        required: true
      responses:
        '200':
          description: Treatment updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Clinical history ID or Treatment ID is required, or validation error
        '404':
          description: Clinical history or treatment not found
        '500':
          description: Error updating treatment
      security:
      - jwt: []
    delete:
      summary: Delete a treatment from a clinical history
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: treatmentId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Treatment deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Clinical history ID or Treatment ID is required
        '404':
          description: Clinical history or treatment not found
        '500':
          description: Error deleting treatment
      security:
      - jwt: []
  /api/v1/histories/{id}/condition:
    post:
      summary: Add a new current condition to a clinical history
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CurrentCondition'
        required: true
      responses:
        '200':
          description: Current condition added successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Clinical history ID is required or validation error
        '404':
          description: Clinical history not found
        '500':
          description: Error adding current condition
      security:
      - jwt: []
  /api/v1/histories/{id}/condition/{currentConditionId}:
    put:
      summary: Update a current condition in a clinical history
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: currentConditionId
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CurrentCondition'
        required: true
      responses:
        '200':
          description: Current condition updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Clinical history ID or Current condition ID is required, or validation error
        '404':
          description: Clinical history or current condition not found
        '500':
          description: Error updating current condition
      security:
      - jwt: []
    delete:
      summary: Delete a current condition from a clinical history
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: currentConditionId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Current condition deleted successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClinicalHistory'
        '400':
          description: Clinical history ID or Current condition ID is required
        '404':
          description: Clinical history or current condition not found
        '500':
          description: Error deleting current condition
      security:
      - jwt: []
  /api/v1/histories/{id}/image:
    post:
      summary: Upload an image to a clinical history record
      description: Allows uploading an image to an existing clinical history record.
      parameters:
      - in: path
        name: id
        description: The ID of the clinical history record.
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  description: The image file to upload.
                  type: string
                  format: binary
        required: true
      responses:
        '201':
          description: Image uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Image uploaded successfully
                    type: string
                  imageUrl:
                    description: URL of the uploaded image.
                    type: string
        '400':
          description: Bad Request - Missing required headers or Clinical History ID.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: clinicalHistoryId is required
                    type: string
        '404':
          description: Clinical History record not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Clinical history not found
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Internal server error occurred.
                    type: string
      security:
      - jwt: []
  /api/v1/histories/{id}/image/{imageId}:
    delete:
      summary: Delete an image from a clinical history record
      description: Deletes a specific image associated with a clinical history record by its ID. Also removes the file from Azure Blob Storage.
      parameters:
      - in: path
        name: id
        description: The ID of the clinical history record.
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: imageId
        description: The ID of the image to delete.
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Image deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Image deleted successfully
                    type: string
        '400':
          description: Bad Request - Missing or invalid parameters.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: clinicalHistoryId and imageId are required
                    type: string
        '404':
          description: Not Found - Clinical history or image not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Clinical history or image not found
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Error deleting image
                    type: string
                  error:
                    example: Detailed error message.
                    type: string
      security:
      - jwt: []
  /api/v1/histories/{id}/analytic:
    post:
      summary: Upload an analytic to a clinical history record
      description: Allows uploading an analytic to an existing clinical history record.
      parameters:
      - in: path
        name: id
        description: The ID of the clinical history record.
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  description: The analytic file to upload.
                  type: string
                  format: binary
        required: true
      responses:
        '201':
          description: Analytic uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Analytic uploaded successfully
                    type: string
                  analyticUrl:
                    description: URL of the uploaded analytic.
                    type: string
        '400':
          description: Bad Request - Missing required headers or Clinical History ID.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: clinicalHistoryId is required
                    type: string
        '404':
          description: Clinical History record not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Clinical history not found
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Internal server error occurred.
                    type: string
      security:
      - jwt: []
  /api/v1/histories/{id}/analytic/{analyticId}:
    delete:
      summary: Delete an analytic from a clinical history record
      description: Deletes a specific analytic associated with a clinical history record by its ID. Also removes the file from Azure Blob Storage.
      parameters:
      - in: path
        name: id
        description: The ID of the clinical history record.
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: analyticId
        description: The ID of the analytic to delete.
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Analytic deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Analytic deleted successfully
                    type: string
        '400':
          description: Bad Request - Missing or invalid parameters.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: clinicalHistoryId and analyticId are required
                    type: string
        '404':
          description: Not Found - Clinical history or analytic not found.
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Clinical history or analytic not found
                    type: string
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Error deleting analytic
                    type: string
                  error:
                    example: Detailed error message.
                    type: string
      security:
      - jwt: []
  /api/v1/appointments:
    get:
      tags:
      - Appointments
      summary: Get all appointments
      description: Retrieve a list of all appointments in the system.
      responses:
        '200':
          description: List of appointments
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Appointment'
        '500':
          description: Error retrieving appointments
      security:
      - cookieAuth: []
    post:
      tags:
      - Appointments
      summary: Create a new appointment
      description: Schedule a new appointment for a patient with specified details.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppointmentCreate'
        required: true
      responses:
        '201':
          description: Appointment created successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Appointment'
        '500':
          description: Error creating the appointment
      security:
      - cookieAuth: []
  /api/v1/appointments/available:
    get:
      tags:
      - Appointments
      summary: Get available appointment slots
      description: Retrieve available appointment slots for a specific clinic, doctor, and date.
      parameters:
      - in: query
        name: clinicId
        description: The ID of the clinic to check for available appointments
        required: true
        schema:
          type: string
        style: form
      - in: query
        name: doctorId
        description: The ID of the doctor to check for available appointments
        required: true
        schema:
          type: string
        style: form
      - in: query
        name: date
        description: The date to check for available appointments (in YYYY-MM-DD format)
        required: true
        schema:
          type: string
          format: date
        style: form
      responses:
        '200':
          description: List of available appointment slots
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    startTime:
                      description: Start time of the available appointment slot
                      type: string
                      format: time
                    endTime:
                      description: End time of the available appointment slot
                      type: string
                      format: time
        '500':
          description: Error obtaining clinic appointments
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    example: Error obtaining clinic appointments
                    type: string
                  message:
                    example: Detailed error message
                    type: string
      security:
      - cookieAuth: []
  /api/v1/appointments/{id}:
    get:
      tags:
      - Appointments
      summary: Get appointment by ID
      description: Retrieve details of a specific appointment by its ID.
      parameters:
      - in: path
        name: id
        description: The ID of the appointment to retrieve
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Appointment details retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Appointment'
        '404':
          description: Appointment not found
        '500':
          description: Error retrieving the appointment
      security:
      - cookieAuth: []
    put:
      tags:
      - Appointments
      summary: Update an appointment
      description: Modify details of an existing appointment by ID.
      parameters:
      - in: path
        name: id
        description: The ID of the appointment to update
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AppointmentUpdate'
        required: true
      responses:
        '200':
          description: Appointment updated successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Appointment'
        '404':
          description: Appointment not found
        '500':
          description: Error updating the appointment
      security:
      - cookieAuth: []
    delete:
      tags:
      - Appointments
      summary: Delete an appointment
      description: Remove an appointment from the system by its ID.
      parameters:
      - in: path
        name: id
        description: The ID of the appointment to delete
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Appointment deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: Appointment deleted successfully
                    type: string
        '404':
          description: Appointment not found
        '500':
          description: Error deleting the appointment
      security:
      - cookieAuth: []
  /api/v1/appointments/{id}/weather:
    get:
      tags:
      - Appointments
      summary: Get weather forecast for appointment
      description: Retrieve weather forecast for the location and date of a specific appointment by ID.
      parameters:
      - in: path
        name: id
        description: The ID of the appointment for which to retrieve weather information
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Weather forecast for the appointment date and location
        '404':
          description: Appointment or weather data not found
        '500':
          description: Error retrieving the weather information
  /api/v1/appointments/{id}/cancel:
    put:
      tags:
      - Appointments
      summary: Cancel an appointment
      description: Change the status of an appointment to "cancelled" by its ID.
      parameters:
      - in: path
        name: id
        description: The ID of the appointment to cancel
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Appointment cancelled successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Appointment'
        '400':
          description: Appointment ID not provided
        '404':
          description: Appointment not found
        '500':
          description: Error cancelling the appointment
      security:
      - cookieAuth: []
  /api/v1/appointments/{id}/complete:
    put:
      tags:
      - Appointments
      summary: Complete an appointment
      description: Change the status of an appointment to "completed" by its ID.
      parameters:
      - in: path
        name: id
        description: The ID of the appointment to complete
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Appointment completed successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Appointment'
        '400':
          description: Appointment ID not provided
        '404':
          description: Appointment not found
        '500':
          description: Error completing the appointment
      security:
      - cookieAuth: []
  /api/v1/appointments/{id}/noshow:
    put:
      tags:
      - Appointments
      summary: Mark an appointment as no_show
      description: Change the status of an appointment to "no_show" by its ID.
      parameters:
      - in: path
        name: id
        description: The ID of the appointment to mark as no_show
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Appointment marked as no_show successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Appointment'
        '400':
          description: Appointment ID not provided
        '404':
          description: Appointment not found
        '500':
          description: Error marking appointment as no_show
      security:
      - cookieAuth: []
  /api/v1/appointments/patient/{patientId}:
    get:
      tags:
      - Appointments
      summary: Get all appointments for a patient
      description: Retrieve a list of all appointments for a specific patient by their ID.
      parameters:
      - in: path
        name: patientId
        description: The ID of the patient whose appointments to retrieve
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: List of appointments for the patient
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Appointment'
        '500':
          description: Error retrieving appointments for the patient
      security:
      - cookieAuth: []
  /api/v1/appointments/doctor/{doctorId}:
    get:
      tags:
      - Appointments
      summary: Get all appointments for a doctor
      description: Retrieve a list of all appointments for a specific doctor by their ID.
      parameters:
      - in: path
        name: doctorId
        description: The ID of the doctor whose appointments to retrieve
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: List of appointments for the doctor
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Appointment'
        '500':
          description: Error retrieving appointments for the doctor
      security:
      - cookieAuth: []
  /api/v1/appointments/clinic/{clinicId}:
    get:
      tags:
      - Appointments
      summary: Get all appointments for a clinic
      description: Retrieve a list of all appointments for a specific clinic by its ID.
      parameters:
      - in: path
        name: clinicId
        description: The ID of the clinic whose appointments to retrieve
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: List of appointments for the clinic
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Appointment'
        '500':
          description: Error retrieving appointments for the clinic
      security:
      - cookieAuth: []
  /api/v1/patients/:
    get:
      tags:
      - Patients
      summary: Retrieve all patients
      description: Fetch a list of all patients.
      responses:
        '200':
          description: List of patients retrieved successfully.
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Patient'
        '500':
          description: Internal server error.
          content:
            application/json:
              example:
                message: An unexpected error occurred
      security:
      - cookieAuth: []
    post:
      tags:
      - Patients
      summary: Register a new patient
      description: Creates a new patient record in the system.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Patient'
        required: true
      responses:
        '201':
          description: Patient created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Patient'
        '400':
          description: Missing fields in the request body.
          content:
            application/json:
              example:
                message: Missing fields
        '500':
          description: Internal server error.
          content:
            application/json:
              example:
                message: An unexpected error occurred
      security:
      - cookieAuth: []
  /api/v1/patients/{id}:
    get:
      tags:
      - Patients
      summary: Get patient by ID
      description: Fetch a specific patient using their unique ID.
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Patient retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Patient'
        '404':
          description: Patient not found.
          content:
            application/json:
              example:
                message: Patient not found
        '500':
          description: Internal server error.
          content:
            application/json:
              example:
                message: An unexpected error occurred
      security:
      - cookieAuth: []
    put:
      tags:
      - Patients
      summary: Update a patient by ID
      description: Modify the details of a specific patient.
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              type: object
              additionalProperties: true
        required: true
      responses:
        '200':
          description: Patient updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Patient'
        '404':
          description: Patient not found.
          content:
            application/json:
              example:
                message: Patient not found
        '500':
          description: Internal server error.
          content:
            application/json:
              example:
                message: An unexpected error occurred
      security:
      - cookieAuth: []
    delete:
      tags:
      - Patients
      summary: Delete a patient by ID
      description: Remove a specific patient from the system.
      parameters:
      - in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Patient deleted successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Patient'
        '404':
          description: Patient not found.
          content:
            application/json:
              example:
                message: Patient not found
        '500':
          description: Internal server error.
          content:
            application/json:
              example:
                message: An unexpected error occurred
      security:
      - cookieAuth: []
  /api/v1/staff/register:
    post:
      tags:
      - staff
      summary: Register a new doctor
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                surname:
                  type: string
                specialty:
                  type: string
                dni:
                  type: string
                clinicId:
                  type: string
                password:
                  type: string
                email:
                  type: string
        required: true
      responses:
        '201':
          description: Doctor created successfully
        '400':
          description: Bad request
      security:
      - cookieAuth: []
  /api/v1/staff/{doctorId}:
    get:
      tags:
      - staff
      summary: Get doctor by ID
      parameters:
      - in: path
        name: doctorId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Doctor retrieved successfully
        '404':
          description: Doctor not found
    put:
      tags:
      - staff
      summary: Update doctor speciality
      parameters:
      - in: path
        name: doctorId
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                specialty:
                  type: string
        required: true
      responses:
        '200':
          description: Speciality updated successfully
        '404':
          description: Doctor not found
      security:
      - cookieAuth: []
    delete:
      tags:
      - staff
      summary: Delete a doctor
      parameters:
      - in: path
        name: doctorId
        required: true
        schema:
          type: string
        style: simple
      responses:
        '204':
          description: Doctor deleted successfully
        '404':
          description: Doctor not found
      security:
      - cookieAuth: []
  /api/v1/staff/clinic/{clinicId}/speciality/{speciality}:
    get:
      tags:
      - staff
      summary: Get doctors by speciality in a clinic
      parameters:
      - in: path
        name: clinicId
        required: true
        schema:
          type: string
        style: simple
      - in: path
        name: speciality
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: List of doctors
        '404':
          description: No doctors found
  /api/v1/staff/me:
    get:
      tags:
      - staff
      summary: Get authenticated doctor
      responses:
        '200':
          description: Authenticated doctor retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  _id:
                    type: string
                  name:
                    type: string
                  surname:
                    type: string
                  specialty:
                    type: string
                  dni:
                    type: string
                  clinicId:
                    type: string
                  email:
                    type: string
                  userId:
                    type: string
        '404':
          description: Authenticated doctor not found
        '400':
          description: Error retrieving authenticated doctor
      security:
      - cookieAuth: []
  /api/v1/workshifts:
    get:
      tags:
      - Workshifts
      summary: Get all workshifts
      responses:
        '200':
          description: Retrieve a list of workshifts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Workshift'
        '500':
          description: Server error
      security:
      - cookieAuth: []
    post:
      tags:
      - Workshifts
      summary: Create a new workshift
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkshiftInput'
        required: true
      responses:
        '201':
          description: Workshift created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workshift'
        '400':
          description: Validation error
      security:
      - cookieAuth: []
  /api/v1/workshifts/week:
    post:
      tags:
      - Workshifts
      summary: Create a new workshift for a week
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                doctorId:
                  description: Unique identifier for the doctor
                  type: string
                clinicId:
                  description: Unique identifier for the clinic
                  type: string
                duration:
                  example: 480
                  description: Duration of each work shift in minutes
                  type: integer
                periodStartDate:
                  description: Start date of the week, must be a Monday
                  type: string
                  format: date-time
                periodEndDate:
                  description: End date of the week, must be a Sunday within the same week as weekStartDate
                  type: string
                  format: date
              required:
              - doctorId
              - clinicId
              - duration
              - weekStartDate
              - weekEndDate
        required: true
      responses:
        '201':
          description: Workshifts created successfully
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Workshift'
        '400':
          description: Invalid input or validation error
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    example: weekStartDate must be a Monday and weekEndDate a Sunday of the same week
                    description: Error message explaining the issue
                    type: string
      security:
      - cookieAuth: []
  /api/v1/workshifts/{id}:
    get:
      tags:
      - Workshifts
      summary: Get a workshift by ID
      parameters:
      - in: path
        name: id
        description: Workshift ID
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Retrieve a workshift
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workshift'
        '404':
          description: Workshift not found
        '500':
          description: Server error
      security:
      - cookieAuth: []
    put:
      tags:
      - Workshifts
      summary: Update a workshift by ID
      parameters:
      - in: path
        name: id
        description: Workshift ID
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WorkshiftInput'
        required: true
      responses:
        '200':
          description: Workshift updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Workshift'
        '404':
          description: Workshift not found
        '400':
          description: Validation error
      security:
      - cookieAuth: []
    delete:
      tags:
      - Workshifts
      summary: Delete a workshift by ID
      parameters:
      - in: path
        name: id
        description: Workshift ID
        required: true
        schema:
          type: string
        style: simple
      responses:
        '204':
          description: Workshift deleted
        '404':
          description: Workshift not found
        '500':
          description: Server error
      security:
      - cookieAuth: []
  /api/v1/workshifts/doctor/{doctorId}:
    get:
      tags:
      - Workshifts
      summary: Get workshifts by doctor ID
      parameters:
      - in: path
        name: doctorId
        description: Doctor ID
        required: true
        schema:
          type: string
        style: simple
      responses:
        '200':
          description: Lista de workshifts
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Workshift'
        '500':
          description: Error del servidor
      security:
      - cookieAuth: []
components:
  schemas:
    User:
      description: Schema for the User model, including fields for unique ID, email, password, role, and optional associations with patient and clinic.
      type: object
      properties:
        _id:
          example: 550e8400-e29b-41d4-a716-446655440000
          description: Unique identifier for the user. Defaults to a generated UUID.
          type: string
          format: uuid
        email:
          example: john_doe@email.com
          description: Unique email for the user.
          type: string
        password:
          description: Hashed password of the user.
          type: string
        roles:
          example:
          - doctor
          - clinicadmin
          description: List of roles assigned to the user.
          default:
          - patient
          type: array
          items:
            type: string
            enum:
            - admin
            - clinicadmin
            - doctor
            - patient
        doctorid:
          nullable: true
          example: doctor12345
          description: Identifier of the doctor if the user is a clinic doctor.
          type: string
        patientid:
          nullable: true
          example: patient12345
          description: Identifier of the patient if the user is associated with a patient record.
          type: string
        createdAt:
          example: 2023-10-25T08:40:51.620Z
          description: Timestamp when the user was created.
          type: string
          format: date-time
        updatedAt:
          example: 2023-10-26T08:40:51.620Z
          description: Timestamp when the user was last updated.
          type: string
          format: date-time
      required:
      - email
      - password
      - roles
    Clinic:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        city:
          type: string
        district:
          type: string
        plan:
          type: string
        active:
          type: boolean
        postalCode:
          type: string
        countryCode:
          type: string
    ClinicRequest:
      type: object
      properties:
        name:
          type: string
        city:
          type: string
        district:
          type: string
        plan:
          type: string
        active:
          type: boolean
        postalCode:
          type: string
        countryCode:
          type: string
    Payment:
      type: object
      properties:
        id:
          type: string
        date:
          type: string
          format: date-time
        clinicId:
          type: string
        status:
          type: string
        planId:
          type: string
    PaymentRequest:
      type: object
      properties:
        planId:
          type: string
        clinicId:
          type: string
    Plan:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
        price:
          type: number
        features:
          type: array
          items:
            type: string
    ClinicalHistory:
      type: object
      properties:
        id:
          type: string
        patientId:
          type: string
        treatments:
          type: array
          items:
            $ref: '#/components/schemas/Treatment'
        currentConditions:
          type: array
          items:
            $ref: '#/components/schemas/CurrentCondition'
        images:
          type: array
          items:
            $ref: '#/components/schemas/File'
        analytics:
          type: array
          items:
            $ref: '#/components/schemas/File'
        createdAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
    CreateClinicalHistory:
      type: object
      properties:
        patientId:
          type: string
      required:
      - patientId
    Treatment:
      type: object
      properties:
        name:
          description: Name of the treatment
          type: string
        startDate:
          description: Start date of the treatment
          type: string
          format: date
        endDate:
          description: End date of the treatment
          type: string
          format: date
        instructions:
          description: Instructions for the treatment
          type: string
      required:
      - name
      - endDate
      - instructions
    CurrentCondition:
      type: object
      properties:
        name:
          description: Name of the current condition
          type: string
        details:
          description: Additional details about the current condition
          type: string
        since:
          description: When the condition started
          type: string
          format: date
        until:
          description: When the condition ended
          type: string
          format: date
      required:
      - name
      - details
    File:
      type: object
      properties:
        name:
          description: Name of the file
          type: string
        originalName:
          description: Original name of the file
          type: string
        url:
          description: URL of the file
          type: string
        date:
          description: Date the file was uploaded
          type: string
          format: date-time
    Appointment:
      type: object
      properties:
        id:
          description: Unique identifier for the appointment
          type: string
        patientId:
          description: ID of the patient associated with the appointment
          type: string
        clinicId:
          description: ID of the clinic where the appointment is scheduled
          type: string
        doctorId:
          description: ID of the doctor handling the appointment
          type: string
        specialty:
          description: Medical specialty for the appointment
          type: string
          enum:
          - family_medicine
          - nursing
          - physiotherapy
          - gynecology
          - pediatrics
          - dermatology
          - cardiology
          - neurology
          - orthopedics
          - psychiatry
          - endocrinology
          - oncology
          - radiology
          - surgery
          - ophthalmology
          - urology
          - anesthesiology
          - otolaryngology
          - gastroenterology
          - other
        appointmentDate:
          description: Date and time of the appointment
          type: string
          format: date-time
        status:
          description: Current status of the appointment
          type: string
          enum:
          - pending
          - completed
          - cancelled
          - no_show
        createdAt:
          description: Appointment creation timestamp
          type: string
          format: date-time
    AppointmentCreate:
      type: object
      properties:
        patientId:
          description: ID of the patient for whom the appointment is created
          type: string
        clinicId:
          description: ID of the clinic where the appointment will be held
          type: string
        doctorId:
          description: ID of the doctor for the appointment
          type: string
        specialty:
          description: Medical specialty for the appointment
          type: string
          enum:
          - family_medicine
          - nursing
          - physiotherapy
          - gynecology
          - pediatrics
          - dermatology
          - cardiology
          - neurology
          - orthopedics
          - psychiatry
          - endocrinology
          - oncology
          - radiology
          - surgery
          - ophthalmology
          - urology
          - anesthesiology
          - otolaryngology
          - gastroenterology
          - other
        appointmentDate:
          description: Date and time of the appointment
          type: string
          format: date-time
      required:
      - patientId
      - clinicId
      - doctorId
      - specialty
      - appointmentDate
    AppointmentUpdate:
      type: object
      properties:
        specialty:
          description: Updated medical specialty for the appointment
          type: string
          enum:
          - family_medicine
          - nursing
          - physiotherapy
          - gynecology
          - pediatrics
          - dermatology
          - cardiology
          - neurology
          - orthopedics
          - psychiatry
          - endocrinology
          - oncology
          - radiology
          - surgery
          - ophthalmology
          - urology
          - anesthesiology
          - otolaryngology
          - gastroenterology
          - other
        appointmentDate:
          description: Updated date and time of the appointment
          type: string
          format: date-time
        status:
          description: Updated status of the appointment
          type: string
          enum:
          - pending
          - completed
          - cancelled
          - no_show
    Patient:
      type: object
      properties:
        id:
          description: Unique identifier of the patient.
          type: string
        name:
          type: string
        surname:
          type: string
        birthdate:
          type: string
          format: date
        dni:
          type: string
        city:
          type: string
        clinicHistoryId:
          type: string
        username:
          type: string
        email:
          type: string
      required:
      - name
      - surname
      - birthdate
      - dni
      - city
      - clinicHistoryId
      - username
      - email
    ErrorResponse:
      type: object
      properties:
        message:
          type: string
    Workshift:
      type: object
      properties:
        id:
          example: 850154d5-6617-4128-b76b-88979b1cbc44
          type: string
        doctorId:
          example: 850154d5-6617-4128-b76b-88979b1cbc46
          type: string
        clinicId:
          example: ea12fd3d-4d3c-4ba2-b871-673c29fb69d3
          type: string
        startDate:
          example: 2024-11-01T09:00:00Z
          type: string
          format: date-time
        duration:
          example: 120
          type: integer
    WorkshiftInput:
      type: object
      properties:
        doctorId:
          example: 850154d5-6617-4128-b76b-88979b1cbc46
          type: string
        clinicId:
          example: ea12fd3d-4d3c-4ba2-b871-673c29fb69d3
          type: string
        startDate:
          example: 2024-11-01T09:00:00Z
          type: string
          format: date-time
        duration:
          example: 30
          type: integer
  securitySchemes:
    cookieAuth:
      type: apiKey
      in: cookie
      name: token
    jwt:
      type: http
      scheme: bearer
      bearerFormat: JWT
